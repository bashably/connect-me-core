- # Process steps and states
	- The Registration Process has multiple steps
		- 1) User enters required information such as username, password, phone-number, etc
		- 2) Verification code is generated and sent to passed phone number
		- 3) User enters verification code in order to verify phone number
		- 4) Profile is verified
		- 5) User is created and persisted
	- ![Connect-me-registration-states-Version 2.drawio.png](../assets/Connect-me-registration-states-Version_2.drawio_1649361849438_0.png)
	- Only certain interactions are allowed at each state. If other interactions are attempted a `ForbiddenInteractionException` is thrown. This secures the stateful `RegistrationProcess` session bean from illegal interactions or _hacks_.
- # Process vulnerabilities and counter actions
	- ## Inputs of the clumsy user
		- Taken username => availability must be checked
		- Invalid username => **Syntax Check**
		- Weak password => password strength test
		- Wrong phone number => **SMS verification**
		- Invalid phone number (typo) => Phone number syntax check
		- Wrong verification code (typo) => Repeat verification process
	- ## Actions of the clumsy user
		- Ends registrationProcess mid process => No database persistence along this process, store in session
	- ## Inputs of the evil user
		- code injection => charset limitation and syntax checking
		- too long inputs => limit input length
		- profane username => **Profanity Check**
	- ## Actions of the evil user
		- Repeat verification process infinite times => restrict attempts per time per user
			- e.g. limit of 3 attempts. User will be blocked for 5mins after those
		- Bypass verification block by restarting (=resetting) registrationProcess process => keep registrationProcess object in session and check if process restart/reset is allowed
		-
- # Implementation
	- The Registration Process is controlled and represented by the stateful `RegistrationProcess` object **stored in the user's session**. It is a **State Machine**.
		- In every method the current state is checked in order to prevent illegal access
		- In almost every method the state is changed
		- That means, that higher logic only needs to work with the objects responses to certain interactions => The logic that checks if an interaction is allowed is implemented inside the `RegistrationProcess` object.
	- The states of this object are defined in `RegistrationProcessState`.
- # API
	- {{embed [[Registration API]]}}